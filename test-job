def appNames = ["harnessweb", "harvey-integration", "judgesAssistant", "stewards-portal", "webapi"]
def EnvironmentName = "dev"
def startTime = 12 // Use integers, not strings
def stopTime = 15 // Use integers, not strings
def size = 1
pipeline {
  agent any
  stages {
    stage('LOOP') {
      steps {
        script {
          def currentHour = new Date().format("HH")
          appNames.each { appName ->
            def constructedString = "rise-${appName}-${EnvironmentName}-ASG"
            if (currentHour.toInteger() <= startTime) { 
              size = 0
              echo "$size"
            } else if (currentHour.toInteger() >= stopTime) { // Convert to integers
              echo "Hello Afternoon"
              size = 1
            } else {
              echo "The start or stopTime is not configured correct,Please Verify"
            }
             sh'''aws autoscaling update-auto-scaling-group \
              --auto-scaling-group-name "rise-${app_name}-${env}-ASG" \
              --min-size "$size" \
              --max-size "$size" \
              --desired-capacity "$size"
               '''
             echo size
          }
        }
      }
    }
  }
}
